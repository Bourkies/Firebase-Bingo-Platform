<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Bingo - Troubleshooting</title>
    <style>
        :root {
            --bg-color: #1e1e1e; --surface-color: #2d2d2d; --primary-text: #e0e0e0;
            --secondary-text: #a0a0a0; --accent-color: #00b8d4; --border-color: #444;
            --success-color: #81c784; --error-color: #e57373; --warn-color: #ffc107;
            --font-main: 'Roboto', 'Helvetica Neue', 'Arial', sans-serif;
            --font-mono: 'Courier New', Courier, monospace;
        }
        body {
            font-family: var(--font-main); background-color: var(--bg-color); color: var(--primary-text);
            margin: 0; padding: 2rem; box-sizing: border-box;
        }
        .container { width: 100%; max-width: 900px; margin: 0 auto; }
        h1 { color: var(--accent-color); text-align: center; margin-bottom: 2rem; }
        .check-item {
            background-color: var(--surface-color); border-radius: 8px;
            padding: 1.5rem; margin-bottom: 1.5rem;
            border-left: 5px solid var(--border-color);
        }
        .check-item.status-success { border-left-color: var(--success-color); }
        .check-item.status-error { border-left-color: var(--error-color); }
        .check-item.status-warn { border-left-color: var(--warn-color); }

        .check-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
        .check-header h2 { margin: 0; font-size: 1.25rem; }
        .status-badge {
            padding: 0.25rem 0.75rem; border-radius: 12px; font-weight: bold;
            font-size: 0.9rem;
        }
        .status-badge.success { background-color: var(--success-color); color: #111; }
        .status-badge.error { background-color: var(--error-color); color: #111; }
        .status-badge.warn { background-color: var(--warn-color); color: #111; }
        .status-badge.info { background-color: var(--border-color); color: var(--primary-text); }

        .details {
            background-color: var(--bg-color); padding: 1rem; border-radius: 6px;
            font-family: var(--font-mono); font-size: 0.85rem; white-space: pre-wrap;
            word-wrap: break-word; max-height: 300px; overflow-y: auto;
        }
        .details strong { color: var(--accent-color); }
        .error-msg { color: var(--error-color); }
        .button-bar { text-align: center; margin-top: 2rem; }
        button {
            background-color: var(--accent-color); color: #111; border: none;
            padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer;
            font-size: 1rem; font-weight: bold; transition: background-color 0.2s;
        }
        button:hover { background-color: #00d9f5; }
        .instructions {
            background-color: var(--surface-color);
            border-left: 5px solid var(--accent-color);
            padding: 1rem 1.5rem;
            margin-bottom: 2rem;
            border-radius: 8px;
        }
        .instructions ul {
            padding-left: 1.25rem;
            margin: 0.5rem 0 0 0;
        }
    </style>
</head>
<body>
    <!-- The navbar is added here for consistent navigation -->
    <app-navbar></app-navbar>

    <div class="container" style="margin-top: 0;"> <!-- Adjusted margin to account for navbar -->
        <h1>Troubleshooting Diagnostics</h1>
        <p style="text-align: center; margin-top: -1.5rem; color: var(--secondary-text);">v1.0.3</p>

        <div class="instructions">
            <p style="text-align: left; margin: 0;">For comprehensive security testing, run these diagnostics under different access levels:</p>
            <ul>
                <li><strong>As an Admin:</strong> Log in with your admin account.</li>
                <li><strong>As a Player:</strong> Log in with a regular, non-admin account.</li>
                <li><strong>As a Visitor:</strong> Open this page in an Incognito or Private browser window to test logged-out access.</li>
            </ul>
        </div>

        <div id="check-sdk" class="check-item">
            <div class="check-header">
                <h2>Firebase SDK</h2>
                <span id="sdk-status" class="status-badge info">PENDING</span>
            </div>
            <div id="sdk-details" class="details"></div>
        </div>

        <div id="check-config" class="check-item">
            <div class="check-header">
                <h2>Firebase Config</h2>
                <span id="config-status" class="status-badge info">PENDING</span>
            </div>
            <div id="config-details" class="details"></div>
        </div>

        <div id="check-imports" class="check-item">
            <div class="check-header">
                <h2>Firebase Service Imports</h2>
                <span id="imports-status" class="status-badge info">PENDING</span>
            </div>
            <div id="imports-details" class="details"></div>
        </div>

        <div id="check-auth" class="check-item">
            <div class="check-header">
                <h2>Authentication</h2>
                <span id="auth-status" class="status-badge info">PENDING</span>
            </div>
            <div id="auth-details" class="details"></div>
        </div>

        <div id="check-firestore" class="check-item">
            <div class="check-header">
                <h2>Firestore Data</h2>
                <span id="firestore-status" class="status-badge info">PENDING</span>
            </div>
            <div id="firestore-details" class="details"></div>
        </div>

        <div id="check-security" class="check-item">
            <div class="check-header">
                <h2>Security Checks</h2>
                <span id="security-status" class="status-badge info">PENDING</span>
            </div>
            <div id="security-details" class="details"></div>
        </div>

        <div class="button-bar">
            <button id="rerun-checks-btn">Re-run Checks</button>
        </div>
    </div>

    <script type="module" src="./js/pages/troubleshootController.js"></script>
</body>
</html>